<div class="expense-form-container">
  <form [formGroup]="expenseForm" (ngSubmit)="onSubmit()">
    
    <div class="form-group">
      <label for="amount">Amount (â‚¬)</label>
      <input 
        id="amount"
        type="number" 
        step="0.01"
        formControlName="amount"
        class="form-control"
        placeholder="0.00"
      >
      <div *ngIf="expenseForm.get('amount')?.invalid && expenseForm.get('amount')?.touched" 
           class="error-message">
        Valid amount required
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <input 
        id="description"
        type="text" 
        formControlName="description"
        class="form-control"
        placeholder="e.g., Coffee at Starbucks"
        autocomplete="off"
      >
      
      <div *ngIf="suggestedKeywords.length > 0" class="suggestions-container">
        <small>Suggestions:</small>
        <div class="suggestions">
          <span *ngFor="let keyword of suggestedKeywords" 
                class="suggestion-badge"
                (click)="useSuggestion(keyword)">
            {{ keyword }}
          </span>
        </div>
      </div>
      
      <div *ngIf="showPrediction" class="prediction-container">
        <div class="prediction-card">
          <div class="prediction-header">
            <span class="ai-badge">ðŸ¤– AI Prediction</span>
            <span class="confidence-badge" 
                  [ngClass]="{
                    'high-confidence': predictedCategory.confidence > 70,
                    'medium-confidence': predictedCategory.confidence >= 30 && predictedCategory.confidence <= 70,
                    'low-confidence': predictedCategory.confidence < 30
                  }">
              {{ predictedCategory.confidence }}% confidence
            </span>
          </div>
          <div class="prediction-body">
            <p><strong>Category:</strong> {{ predictedCategory.category }}</p>
            <button type="button" 
                    class="btn-sm"
                    (click)="usePrediction()"
                    [disabled]="predictedCategory.confidence < 30">
              Use This Category
            </button>
          </div>
        </div>
      </div>
      
      <div *ngIf="expenseForm.get('description')?.invalid && expenseForm.get('description')?.touched" 
           class="error-message">
        Description required (min 2 characters)
      </div>
    </div>

    <div class="form-group">
      <label for="category">Category</label>
      <select 
        id="category"
        formControlName="category"
        class="form-control"
      >
        <option value="" disabled>Select a category</option>
        <option *ngFor="let cat of categories" [value]="cat.name">
          <span class="category-dot" [style.background-color]="cat.color"></span>
          {{ cat.name }}
        </option>
        <option value="Other">Other</option>
      </select>
      <div *ngIf="expenseForm.get('category')?.invalid && expenseForm.get('category')?.touched" 
           class="error-message">
        Please select a category
      </div>
    </div>

    <div class="form-group">
      <label for="date">Date</label>
      <input 
        id="date"
        type="date" 
        formControlName="date"
        class="form-control"
      >
    </div>

    <div class="form-group">
      <label for="notes">Notes (Optional)</label>
      <textarea 
        id="notes"
        formControlName="notes"
        class="form-control"
        rows="2"
        placeholder="Any additional notes..."
      ></textarea>
    </div>

    <div class="form-group">
      <button 
        type="submit" 
        class="btn-primary"
        [disabled]="expenseForm.invalid"
      >
        Add Expense
      </button>
    </div>

  </form>
</div>